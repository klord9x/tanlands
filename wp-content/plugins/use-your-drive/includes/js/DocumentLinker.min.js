jQuery(document).ready(function(e){"use strict";function t(t){window.top.postMessage({slug:"useyourdrive",action:"wpcp-shortcode",shortcode:t},window.location.origin);var n=e("form").data("callback");""!==n&&window.parent[n](t)}function n(n){var i=e(".UseyourDrive.files").attr("data-token"),r=e(".UseyourDrive[data-token='"+i+"']").attr("data-path"),a=o(".UseyourDrive[data-token='"+i+"'] input[name='selected-files[]']"),s=e(".UseyourDrive.files").attr("data-account-id");return 0===a.length&&t(""),e.ajax({type:"POST",url:UseyourDrive_vars.ajax_url,data:{action:"useyourdrive-create-link",account_id:s,listtoken:i,lastpath:r,entries:a,_ajax_nonce:UseyourDrive_vars.createlink_nonce},beforeSend:function(){e(".UseyourDrive .loading").height(e(".UseyourDrive .ajax-filelist").height()),e(".UseyourDrive .loading").fadeTo(400,.8),e(".UseyourDrive .insert_links").attr("disabled","disabled")},complete:function(){e(".UseyourDrive .loading").fadeOut(400),e(".UseyourDrive .insert_links").removeAttr("disabled")},success:function(o){if(console.log(o),null!==o&&null!==o.links&&o.links.length>0){var i="";e.each(o.links,function(e,t){"download"===n&&(t.link="https://drive.google.com/uc?export=download&id="+t.id,!1!==t.resourcekey&&(t.link=t.link+"&resourcekey="+t.resourcekey)),i+='<a class="UseyourDrive-directlink" href="'+t.link+'" target="_blank">'+t.name+"</a><br/>"}),t(i)}},dataType:"json"}),!1}function o(t){var n=e(t+":checked").map(function(){return this.value}).get();return n}var i=e("#do_link");i.on("click",function(e){e.stopPropagation()}),e("li.link-item").on("click",function(t){t.stopPropagation();var o=e(this).find("a").data("type");n(o)}),tippy(i.get(0),{trigger:"click",content:i.next(".tippy-content-holder").get(0),maxWidth:350,allowHTML:!0,placement:"top-end",moveTransition:"transform 0.2s ease-out",interactive:!0,theme:"wpcloudplugins-light",onShow:function(t){e(t.popper).find(".tippy-content-holder").removeClass("tippy-content-holder")}})});