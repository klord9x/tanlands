jQuery(document).ready(function(e){"use strict";function t(t){window.top.postMessage({slug:"useyourdrive",action:"wpcp-shortcode",shortcode:t},window.location.origin);var i=e("form").data("callback");""!==i&&window.parent[i](t)}function i(i){var r=e(".UseyourDrive.files").attr("data-token"),o=e(".UseyourDrive[data-token='"+r+"']").attr("data-path"),a=n(".UseyourDrive[data-token='"+r+"'] input[name='selected-files[]']"),d=e(".UseyourDrive.files").attr("data-account-id");return 0===a.length&&t(""),e.ajax({type:"POST",url:UseyourDrive_vars.ajax_url,data:{action:"useyourdrive-embedded",account_id:d,listtoken:r,lastpath:o,entries:a,editable:"preview"!==i,_ajax_nonce:UseyourDrive_vars.createlink_nonce},beforeSend:function(){e(".UseyourDrive .loading").height(e(".UseyourDrive .ajax-filelist").height()),e(".UseyourDrive .loading").fadeTo(400,.8),e(".UseyourDrive .insert_links").attr("disabled","disabled")},complete:function(){e(".UseyourDrive .loading").fadeOut(400),e(".UseyourDrive .insert_links").removeAttr("disabled")},success:function(n){if(null!==n&&null!==n.links&&n.links.length>0){var r="";e.each(n.links,function(e,t){"iframe"===t.type?("editable"===i?t.embeddedlink+="&rm=minimal&embedded=true":"editable-full"===i&&(t.embeddedlink+="&rm=embedded&embedded=true"),r+='<iframe src="'+t.embeddedlink+'" height="480" style="width:100%;" frameborder="0" scrolling="no" class="uyd-embedded" allowfullscreen></iframe>'):"image"===t.type&&(r+='<img src="'+t.embeddedlink+'">')}),t(r)}},dataType:"json"}),!1}function n(t){var i=e(t+":checked").map(function(){return this.value}).get();return i}var r=e("#do_embed");r.on("click",function(e){e.stopPropagation()}),e("li.link-item").on("click",function(t){t.stopPropagation();var n=e(this).find("a").data("type");i(n)}),tippy(r.get(0),{trigger:"click",content:r.next(".tippy-content-holder").get(0),maxWidth:350,allowHTML:!0,placement:"top-end",moveTransition:"transform 0.2s ease-out",interactive:!0,theme:"wpcloudplugins-light",onShow:function(t){e(t.popper).find(".tippy-content-holder").removeClass("tippy-content-holder")}})});